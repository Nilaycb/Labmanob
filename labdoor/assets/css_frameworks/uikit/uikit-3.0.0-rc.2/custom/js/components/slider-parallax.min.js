/*! UIkit 3.0.0-rc.2 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("uikit-util")):"function"==typeof define&&define.amd?define("uikitslider_parallax",["uikit-util"],t):e.UIkitSlider_parallax=t(e.UIkit.util)}(this,function(b){"use strict";var e=["x","y","bgx","bgy","rotate","scale","color","backgroundColor","borderColor","opacity","blur","hue","grayscale","invert","saturate","sepia","fopacity"];function v(e,t){var i=e.length-1,r=Math.min(Math.floor(i*t),i-1),n=e.slice(r,r+2);return n.push(1===t?1:t%(1/i)*i),n}function k(e,t){var i=v(e,t),r=i[0],n=i[1],s=i[2];return(b.isNumber(r)?r+Math.abs(r-n)*s*(r<n?1:-1):+n).toFixed(2)}function o(e){return b.endsWith(e,"in")}function c(e,t,i){return i/=2,o(e)?t<0?1-i:i:t<0?i:1-i}return{mixins:[{props:e.reduce(function(e,t){return e[t]="list",e},{media:"media"}),data:e.reduce(function(e,t){return e[t]=void 0,e},{media:!1}),computed:{props:function(d,p){var m=this;return e.reduce(function(e,t){if(b.isUndefined(d[t]))return e;var i,r,n,s=t.match(/color/i),a=s||"opacity"===t,o=d[t].slice(0);a&&b.css(p,t,""),o.length<2&&o.unshift(("scale"===t?1:a?b.css(p,t):0)||0);var c=b.includes(o.join(""),"%")?"%":"px";if(s){var u=p.style.color;o=o.map(function(e){return t=p,i=e,b.css(b.css(t,"color",i),"color").split(/[(),]/g).slice(1,-1).concat(1).slice(0,4).map(function(e){return b.toFloat(e)});var t,i}),p.style.color=u}else o=o.map(b.toFloat);if(t.match(/^bg/))if(b.css(p,"background-position-"+t[2],""),r=b.css(p,"backgroundPosition").split(" ")["x"===t[2]?0:1],m.covers){var l=Math.min.apply(Math,o),f=Math.max.apply(Math,o),h=o.indexOf(l)<o.indexOf(f);n=f-l,o=o.map(function(e){return e-(h?l:f)}),i=(h?-n:0)+"px"}else i=r;return e[t]={steps:o,unit:c,pos:i,bgPos:r,diff:n},e},{})},bgProps:function(){var t=this;return["bgx","bgy"].filter(function(e){return e in t.props})},covers:function(e,t){return r=(i=t).style.backgroundSize,n="cover"===b.css(b.css(i,"backgroundSize",""),"backgroundSize"),i.style.backgroundSize=r,n;var i,r,n}},disconnected:function(){delete this._image},update:[{read:function(t){var i=this;if(t.active=!this.media||window.matchMedia(this.media).matches,t.image&&(t.image.dimEl={width:this.$el.offsetWidth,height:this.$el.offsetHeight}),!("image"in t)&&this.covers&&this.bgProps.length){var e=b.css(this.$el,"backgroundImage").replace(/^none|url\(["']?(.+?)["']?\)$/,"$1");e&&(t.image=!1,b.getImage(e).then(function(e){t.image={width:e.naturalWidth,height:e.naturalHeight},i.$emit()}))}},write:function(e){var c=this,u=e.image,t=e.active;if(u)if(t){var l=u.dimEl,f=b.Dimensions.cover(u,l);this.bgProps.forEach(function(e){var t=c.props[e],i=t.diff,r=t.bgPos,n=t.steps,s="bgy"===e?"height":"width",a=f[s]-l[s];if(r.match(/%$|0px/)){if(a<i)l[s]=f[s]+i-a;else if(i<a){var o=parseFloat(r);o&&(c.props[e].steps=n.map(function(e){return e-(a-i)/(100/o)}))}f=b.Dimensions.cover(u,l)}}),b.css(this.$el,{backgroundSize:f.width+"px "+f.height+"px",backgroundRepeat:"no-repeat"})}else b.css(this.$el,{backgroundSize:"",backgroundRepeat:""})},events:["load","resize"]}],methods:{reset:function(){var i=this;b.each(this.getCss(0),function(e,t){return b.css(i.$el,t,"")})},getCss:function(p){var m=this.props,g=!1;return Object.keys(m).reduce(function(e,t){var i=m[t],r=i.steps,n=i.unit,s=i.pos,a=k(r,p);switch(t){case"x":case"y":if(g)break;var o=["x","y"].map(function(e){return t===e?a+n:m[e]?k(m[e].steps,p)+m[e].unit:0}),c=o[0],u=o[1];g=e.transform+=" translate3d("+c+", "+u+", 0)";break;case"rotate":e.transform+=" rotate("+a+"deg)";break;case"scale":e.transform+=" scale("+a+")";break;case"bgy":case"bgx":e["background-position-"+t[2]]="calc("+s+" + "+(a+n)+")";break;case"color":case"backgroundColor":case"borderColor":var l=v(r,p),f=l[0],h=l[1],d=l[2];e[t]="rgba("+f.map(function(e,t){return e+=d*(h[t]-e),3===t?b.toFloat(e):parseInt(e,10)}).join(",")+")";break;case"blur":e.filter+=" blur("+a+"px)";break;case"hue":e.filter+=" hue-rotate("+a+"deg)";break;case"fopacity":e.filter+=" opacity("+a+"%)";break;case"grayscale":case"invert":case"saturate":case"sepia":e.filter+=" "+t+"("+a+"%)";break;default:e[t]=a}return e},{transform:"",filter:""})}}}],data:{selItem:"!li"},computed:{item:function(e,t){var i=e.selItem;return b.query(i,t)}},events:[{name:"itemshown",self:!0,el:function(){return this.item},handler:function(){b.css(this.$el,this.getCss(.5))}},{name:"itemin itemout",self:!0,el:function(){return this.item},handler:function(e){var t=e.type,i=e.detail,r=i.percent,n=i.duration,s=i.timing,a=i.dir;b.Transition.cancel(this.$el),b.css(this.$el,this.getCss(c(t,a,r))),b.Transition.start(this.$el,this.getCss(o(t)?.5:0<a?1:0),n,s).catch(b.noop)}},{name:"transitioncanceled transitionend",self:!0,el:function(){return this.item},handler:function(){b.Transition.cancel(this.$el)}},{name:"itemtranslatein itemtranslateout",self:!0,el:function(){return this.item},handler:function(e){var t=e.type,i=e.detail,r=i.percent,n=i.dir;b.Transition.cancel(this.$el),b.css(this.$el,this.getCss(c(t,n,r)))}}]}});